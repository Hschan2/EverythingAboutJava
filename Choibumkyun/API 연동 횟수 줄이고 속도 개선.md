# API의 연동 횟수를 줄이고 속도 개선하기 (Caffeine Cache)

## 문제 원인
한 번의 호출은 빠르게 응답이 가능하나 이러한 호출이 누적이 되어 쌓이고 쌓이면서 응답 속도가 느려지는 문제가 발생한다.   

예시.   
* 2개의 API가 호출 횟수 대부분을 차지
* 2개의 API는 모두 데이터 조회
    * 패턴: 같은 API를 ID의 값을 바꾸면서 호출
* 데이터가 거의 바귀지 않음   

해결.   
1. N개의 ID의 값을 받는 API를 추가   
    * API 호출 횟수를 NN회에서 1 ~ 5회로 감소 효과   
2. 메모리에 캐시   
    * 같은 데이터에 대한 API 호출 횟수 N회에서 1회로 감소   
    * 일정 시간동안 캐싱   

## 캐시 라이브러리 - Caffeine
* 메모리 캐시 라이브러리
    * 이미 다른 데이터 캐시 목적으로 사용
    * 레거시 코드에서도 적용이 어렵지 않음
* 유용한 기능
    * 읽은 뒤 일정 시간 이후에 캐시에서 제거
    * 변경 후 일정 시간 이후에 캐시에서 제거
    * 일정 시간 뒤 캐시 값 자동 갱신
    * 변경 발견 시 이벤트 발생   

## Caffeine 사용 후 결과
* 응답 시간 감소 (개선)
* 다음 상황 시 메모리 캐시 고려
    * 거의 바뀌지 않은 데이터
    * 변경이 즉시 반영되지 않아도 되는 데이터
    * 크기가 작은 데이터

[API 연동 횟수 감소 속도 개선](https://www.youtube.com/watch?v=7h3ZRBHSUQo)