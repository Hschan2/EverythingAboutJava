# 이야기 - 마이크로서비스 5개 배포 원칙

## 실행 격리 (Isolated Execution)
* 부하/배포에 있어서 마이크로서비스 간에 영향을 주면 안 된다.
    * 한 호스트에서 여러 마이크로서비스 인스턴스를 실행하면
        * 한 마이크로서비스의 부하가 급격히 증가하고 다른 마이크로서비스의 성능이 저하된다.
        * 한 마이크로서비스 배포를 위한 설정을 변경하고 다른 마이크로서비스 배포에 영향을 끼친다.
* 격리된 환경에서 마이크로서비스를 실행해야 한다.
    * 가상화 기술, 컨테이너, FaaS 등으로 격리가 쉬워진다.
    * 물리적 장비: 강한 격리, 컨테이너: 빠른 제공   

## 자동화에 초점 (Focus on Automation)
* 마이크로서비스가 증가할수록 더 복잡질 경우
    * 더 많은 절차, 더 많은 설정, 더 많은 모니터링 대상이 필요하다.
    * 운영 부하가 증가한다.
* 운영 부하의 감소를 위해 자동화에 초점을 맞춰야 한다.
    * 자동화하지 않으면 성장에 빠르게 대응할 수 없다.
* 개발자가 직접 (인프라) 서비스를 제공할 수 있도록 한다.
    * 생산성이 증가한다.   

## 코드형 인프라 (Infrastructure as Code)
* 인프라스트럭처를 코드로 정의하기
    * 자동화를 구현하는 한 가지 방법이다.
    * 텍스트 형식으로 원하는 인프라스트럭처를 정의한다.
    * 인프라스트럭처에 대한 버전 관리가 가능해진다.
* Terraform, Pulumi 등 특화된 도구가 존재한다.
    * 클라우드/컨테이너 확대 -> Puppet, Ansible과 같은 도구는 감소세이다.   

## 무중단 배포 (Zero-downtime Deployment)
* 마이크로서비스 개발/배포에 있어 무중단 배포는 필수이다.
* 서비스 사용자에 통지하지 않고 출시하는 것이 목표이다.
    * 출시하기 위해 사용자와 일정을 조율하고 공유하는 과정을 제거한다.
* 독립적 배포를 위해서라도 필요하다.   

## 기대 상태 관리 (Desired State Management)
* 수작업 없이 인프라스트럭처를 원하는 상태로 유지해야 한다.
    * 예. 최소 3객의 인스턴스가 실행 중이어야 한다.
    * 예. CPU 부하가 50% 이상이면 인스턴스를 1개 더 늘린다.
* 플랫폼 지원과 도구가 필요하다.   

[동영상](https://www.youtube.com/watch?v=ZSpZtZfhnnk)