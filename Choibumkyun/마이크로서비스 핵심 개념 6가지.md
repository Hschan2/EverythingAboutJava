# 책 - 마이크로서비스 핵심 개념 6가지

## 마이크로서비스
소프트웨어가 잘 정의된 API를 통해서 통신하는 소규모의 독립적인 서비스로 구성되어 있는 경우의 소프트웨어 개발을 위한 아키텍처 및 조직적 접근 방식을 말한다. 즉, 애플리케이션 구축을 위한 아키텍처 기반의 접근 방식이다.   

## 독립적 배포
책을 쓴 저자의 의견은 ```한 가지만 골라야 한다면 '독립적 배포'를 선택한다.```이다. 다른 마이크로서비스를 배포하지 않고 마이크로서비스를 변경하고 배포 그리고 출시할 수 있다. 이를 위해서는 마이크로서비스 간 결합도를 낮춰야 하는데 즉, 서비스 간에 명시적, 확실한 정의, 안정된 명세와 계약이 필요하다.   

## 비즈니스 도메인을 중심으로 모델링
<b>도메인 기준</b>으로 서비스 경계를 정의해야 한다. 즉, 한 마이크로서비스가 기능에 필요한 전체를 구현이 가능하고 새 기능을 출시하는 것이 쉬워진다. 그리고 다른 방식으로 마이크로서비스를 재조합하는 것이 간단해진다.   

그리고 한 기능의 구현이 여러 마이크로서비스에 걸쳐 있으면 기능을 출시하는 비용이 증가한다. 서비스 간 조율과 순서 관리 등 더 많은 일을 처리해야 한다. 그리고 여러 서비스에 걸친 변경은 가능한 적게 할 수 있는 방법을 찾아야 한다.   

## 자신의 상태를 가지다
마이크로서비스는 데이터베이스에 <b>공유</b>하지 말아야 한다. 다른 마이크로서비스가 가지고 있는 데이터에 접근해야 하면 데이터베이스에 직접 접근하지 말고 API 등을 통해 접근해야 한다.   

데이터를 공유하지 않는 것은 구현을 감추고 결합도를 낮춘다.   

## 크기
```"A microservice should be as big as my head." - James Lewis```
위의 뜻은 자신의 머리가 이해할 수 있을 정도의 크기를 가지고 있어야 한다는 것을 말한다. 상황에 따라 다르며 오랜 경험자와 신규 입사자 그리고 스타트업과 대기업이 다른 것처럼.   

크기보다는 다음 두 가지에 집중해야 한다.   
* 얼마나 많은 마이크로서비스를 다룰 수 있는가?
    * 마이크로서비스가 증가하면 복잡도가 증가하고 새로운 기술을 습득해야 한다.
* 마이크로서비스 경계 정의
    * 실타래가 복잡하게 얽히지 않도록 해야 한다.   

## 유연함
```"Microservices buy you options." - James Lewis```

이는 비용을 들여서 미래에 유연해질 수 있는 옵션을 구매해야 한다는 것을 말한다. 기술과 확장, 견고함 등에서 유연함을 구매하고 아직 벌어지지 않은 미래를 너무 많은 옵션을 구매하는 것은 힘들게 하는 원인이 될 수 있다.   

그리고 점진적으로 마이크로서비스로 넘어가는 것을 아주 권장한다.   

## 아키텍처와 조직을 맞추다
조직의 구조는 아키텍처에 영향을 준다. 아키텍처는 조직 구조와 닮았기 때문이다.   

그리고 소프트웨어를 더 빨리 배포하기를 원한다. 조직 간 이관이나 사일로를 줄여야 하며 여러 기능을 한 조직에 모아 줄여야 한다. 예를 들어서 프론트엔드팀, 백엔드팀, 데이터베이스팀을 고객팀, 구매팀 등으로 말이다.   

<b>비즈니스 도메인</b>은 시스템 아키텍처를 주도하는 주요 원동력이다.   

## 정리
* 꼭 독립적 배포!
* 도메인에 맞춰서 모델링하기
* 자신만의 상태를 가져야 한다.
* 자신만의 크기
* 미래를 위해 유연해지다.
* 아키텍처와 조직을 맞추다.   

[마이크로서비스 핵심 개념 6가지](https://www.youtube.com/watch?v=3pybGLmTREw)