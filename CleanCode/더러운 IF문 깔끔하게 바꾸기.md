# 더러운 If문 아름답게 만들기

```
if (나이 > 19) {
    if (간경화 == false) {
        console.log("음주 가능")
        if (수술 == true) {
            console.log("음주 비권장")
        }
    }
} else {
    console.log("불가능")
}
```

위 처럼 조건문 안에 조건문처럼 사용하는 것은 <b>Nesting(네스팅)</b>이라고 한다. Nesting이 3번 이상된 코드는 좋지 않은 코드이다.   

만약 회원가입 기능을 활용한다고 한다면 아이디 중복, 아이디 길이, 비밀번호 길이 등을 확인해야 할 것이다. 그럴 때마다 위 처럼 많은 Nesting을 하게 된다면 가독성이 떨어진다.   

## 리팩토링
### And / Or 연산자로 축약
```
if (아이디 중복아님 && 아이디 길이충분 && 비밀번호 길이적절) {
    가입()
} else {
    불가()
}
```

위 처럼 연산자를 활용해서 길이를 축약할 수 있다. 그러나 로직이 달라지거나 이것만으로 문제가 해결되지 않을 수 있다.   

### Gard Clause
이 방법은 ```Else 문```을 맨 아래에 작성해 예외 처리를 하는 방법이 아닌 예외 처리를 맨 위에 작성하는 방법이다.   

```
if (아이디 중복) {
    거절('아이디 중복');
}
if (아이디 길이불충분) {
    거절('아이디 길이불충분');
}
if (비밀번호 길이불충분) {
    거절('비밀번호 길이불충분');
}

가입();
```

위 처럼 작성하면 가독성이 올라가는 장점이 있다. 그러나 성능면에서 실행되는 코드가 많아지기 때문에 단점이 될 수 있다. 이럴 경우에는 함수를 사용하면 개선할 수 있다.   

```
function signUp() {
if (아이디 중복) return 거절('아이디 중복');
if (아이디 길이불충분) return 거절('아이디 길이불충분');
if (비밀번호 길이불충분) return 거절('비밀번호 길이불충분');

return 가입();
}

signUp();
```

### 함수처리
Nesting으로 조건문 혹은 반복문을 처리해야겠다면 함수로 묶어서 처리하는 방법이 있다.   

```
function checkLength() {
    if (아이디 길이적절) {
        if (비밀번호 길이적절) {
            가입();
        } else {
            거절("비밀번호 길이불충분");
        }
    } else {
        거절("아이디 길이불충분");
    }
}

if (아이디 중복아님) {
    checkLength();
} else {
    거절("아이디 중복");
}
```

물론, 함수 처리를 할 경우 주의해야 할 부분이 있다. 입력과 출력이 이루어질 수 있도록 구현을 해야 하는 것이 좋다.

```
function checkLength(id, password) {
    if (아이디 길이적절) {
        if (비밀번호 길이적절) {
            return 'good';
        } else {
            return 'bad';
        }
    } else {
        return 'bad';
    }
}

if (아이디 중복아님) {
    checkLength();
} else {
    거절("아이디 중복");
}
```

그리고 재사용을 하지 않는다면 함수 처리로 구현하는 것은 오히려 비효율적일 수 있다. 그리고 함수 처리를 했을 경우, 그 함수가 무엇인지 찾아야 하는 복잡성의 단점이 존재한다.   

## 결론
기능 구현을 위한 코딩과 코드 관리를 위한 코딩(Refactoring, Design Pattern, ...)을 알아두는 것이 좋다.   

초급 개발자에게는 기능구현을 위한 코딩에 집중하는 것이 좋다.