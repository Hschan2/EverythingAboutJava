# Forward Proxy vs Reverse Proxy vs Load Balancer

## Load Balancer
서버로 요청하는 클라이언트의 수가 늘어나서 엑세스가 증가할 때, 서버의 하드웨어를 고성능으로 바꾸어 해결할 수가 있다. 이를 Scale-Up(스케일 업)이라고 한다. 하지만 다수의 사용자가 집중적으로 엑세스를 한다면 서버가 고성능이라도 힘들 수 있다. 이 때, 복수의 서버를 사용하여 처리를 분담할 수 있는데 이를 <b>분산 처리</b>라고 한다.   

분산 처리 방법은 여러가지이다.   
* 여러 대의 웹 서버를 설치하고 한 대가 담당하는 사용자의 수를 줄이는 방법: 이 때, 부하 분산 장치로 Load Balancer(로드밸런서)를 이용할 수 있다.   

즉, 로드밸런싱이란 여러 대의 서버가 분산처리할 수 있도록 요청을 나누어주는 서비스이다.   

로드밸런서와 요청을 분배할 때 판단 근거: 대화가 복수의 페이지에 걸쳐 있지 않은 단순한 액세스라면 웹 서버의 부하 상태가 판단 근거이며, 서버의 부하 상태는 시험 패킷과 같은 것을 이용하여 웹 서버에 보내어 응답 시간으로 부하를 판단할 수 있다.   

또 다른 근거로는 미리 웹 서버에 능력을 설정한 후에 비율에 따라 요청을 분배할 수도 있다.   

### 로드밸런서의 종류
1. L2: 맥 주소, IP주소를 바탕으로 로드 밸런싱   
2. L3: 맥 주소, IP주소를 바탕으로 로드 밸런싱   
3. L4: 전송 계층에서 로드밸런싱하는 것. 즉, 요청을 담당하는 여러 대의 서버로 로드밸런서가 요청을 나누어주는 것   
4. L7: 응용 계층에서 로드밸런싱. 어느 곳을 요청하느냐에 따라 담당 서버들로 요청을 나누어주는 것   

## Proxy (프록시)
여기서 말하는 프록시는 네트워크 프록시이다. 프록시는 <b>대리(위임)</b>이라는 뜻을 가지고 있으며, 웹 서버에서 중개자 역할을 한다. 즉, 무언가의 대리 역할을 하는 것을 말한다.   

### Proxy Server
서버와 클라이언트 간의 중계 서버로서 통신을 대신 수행하는 역할을 말한다. 프록시는 서버와 클라이언트 두 개 모두 대신하는 역할을 한다.   

### Forward Proxy
클라이언트와 인터넷 사이에 프록시가 위치해서 클라이언트 대신 서버에 요청을 보내주는 역할을 한다.   

Forward Proxy의 장점은 로컬 네트워크와 인터넷 사이에 오가는 트래픽을 제어할 수 있다. (필터링 등)   

### Reverse Proxy
서버에 응답하는 대신 클라이언트에 응답을 보내주는 역할을 한다. 네트워크에 가장 끝에 있는 웹 서버의 바로 앞에 위치한다. 그러므로 웹 서버를 향한 모든 요청을 처리할 수 있다.   

또한, 웹 서버의 보안 기능을 추가하거나 빠른 웹 서버 캐시를 느린 웹 서버 앞에 놓음으로써 성능을 개선할 수 있다.   

### Proxy를 네트워크에 어떻게 배치할 수 있을까?
<b>입구 프록시</b>는 인터넷 서비스 공급자(ISP) 접근 지점에 위치하여 속도를 개선할 수 있다. 다운로드 속도를 개선하고 인터넷 대역폭 비용을 줄이기 위해서 캐시 프록시를 이용해 많이 찾는 요청들이 저장하는 프록시 구조로 사용한다.   

<b>네트워크 교환 프록시</b>는 캐시를 이용해 인터넷의 혼잡을 완화하고 트래픽 흐름을 감시하기 위해 충분한 처리 능력을 갖춘 프록시가 네트워크 사이에 인터넷 교환 지점에 놓일 수 있다. 

### Proxy를 사용하는 이유
* Filter (필터)   
Forward Proxy와 비슷한 역할을 하며, 허용한 컨텐츠에는 제한이 없는 접근을 허용하며 반대로 부적절한 사이트에 접근을 막을 수 있는 역할을 한다.   

* 접근 제어   
많은 웹 서버들과 웹 리소스에 대한 단일한 접근 제어 전략을 구현하고 추적을 하기 위해 사용할 수 있다. 예를 들어, 접근이 허가된 클라이언트는 접속이 가능하게 하나 반대로 허가되지 않은 클라이언트에게는 비밀번호 등을 요구할 수 있다.   

* Caching (캐싱)   
프록시 캐시는 인기 있는 요청을 관리하고 해당 요청이 올 경우, 서버까지 거치지 않고 바로 프록시에서 응답하여 느리고 비싼 커뮤니케이션 비용을 줄일 수 있다.   

* 익명화   
HTTP 메세지에서 신원을 식별할 수 있는 특성을 제거함으로써 개인 정보 보호와 익명성 보장에 기여할 수 있다. 즉, 클라이언트 요청이었으나 프록시 요청인 것처럼 위장할 수 있고 보안에 기여할 수 있다.   

* 로드 밸런싱   
서버가 요청을 나누어 가질 ㅜㅅ 있도록 프록시에서 결정할 수 있다.   

## 정리
<b>로드밸런서</b>: 클라이언트의 요청을 분산하여 서버에 나누어주는 역할 (나누는 기준은 서버의 부화 등)   
<b>프록시</b>: 클라이언트와 서버 사이에 중계해주는 대리 역할을 수행 (대표적으로 Forward Proxy, Reverse Proxy)   

[출처](https://www.youtube.com/watch?v=u4O4zHdiFhk)