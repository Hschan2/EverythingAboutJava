# Git 브랜치 전략

## 브랜치 전략
Git branch management strategy   
* 여러 개발자가 협업하는 환경에서 Git 저장소를 효과적으로 활용하기 위한 Work-flow
* 브랜치의 생성, 삭제, 병합이 자유로운 Git이 유연한 구조를 활용하여 다양한 방식으로 소스 관리를 할 수 있다.   

만약에 브랜치 전략이 없다면 최신 branch를 알 수 없으며, 급하게 수정 후에 배포할 일이 생겼을 때에 어떤 branch를 기준으로 수정해야 하며 어떤 배포 버전을 사용해야 할지 모르게 된다. 그리고 동료 개발자가 어떤 커밋을 하였는지 모르게 된다. 즉, ```동료들과 원활한 협업을 위한 방법론```이라고 생각하면 된다.   

## 자주 쓰이는 브랜치 전략
* Git-flow: 5가지의 브랜치를 이용하여 운영하는 브랜치 전략
* Github-flow: master 브랜치와 Pull Request를 활용한 단순한 브랜치 전략   

### Git-flow
항상 유지되는 2개의 메인 브랜치와 역할을 완료하면 사라지는 5개의 보조 브랜치로 구성되어 있다.   

* 메인 브랜치: 항상 유지
    * master: 제품으로 출시될 수 있는 브랜치 (필드 브랜치)
    * develop: 다음 출시 버전을 개발하는 브랜치 (필드 브랜치)
* 보조 브랜치: merge가 되면 사라짐
    * feature: 기능을 개발하는 브랜치
    * release: 이번 출시 버전을 준비하는 브랜치
    * hotfix: 출시 버전에서 발생한 버그를 수정하는 브랜치

#### Git-flow 개발 프로세스
1. 개발자는 develop 브랜치로부터 본인이 개발할 기능을 위한 feature 브랜치를 만든다.   
2. feature 브랜치에서 기능을 만들다가, 기능이 완성되면 develop 브랜치에 merge한다.   
3. 이번 배포 버전의 기능들이 develop 브랜치에 모두 merge됐다면, QA를 위해 release 브랜치를 생성   
4. release 브랜치에서 오류가 발생한다면 release 브랜치 내에서 수정한다. QA 완료 후에 해당 버전을 배포하기 위해 master 브랜치로 merge한다. bugfix가 있었다면 해당 내용을 반영하기 위해 develop 브랜치에도 merge   
5. 만약 제품(master)에서 버그가 발생한다면, hotfix 브랜치를 생성   
6. hotfix 브랜치에서 버그 픽스가 끝나면, develop과 master 브랜치에 각각 merge   

### Git-flow 특징
* 주기적으로 배포를 하는 서비스에 적합하다.   
* 가장 유명한 전략인 만큼 많은 IDE가 지원한다.   

## Github-flow
제품이 릴리즈되는 최신 버전인 master 브랜치만이 존재한다.

### Github-flow 개발 프로세스
1. 기능 개발, 버그 픽스 혹은 어떤 이유로든 브랜치를 생성 (Git-flow처럼 체계적인 분류가 없기 때문에 브랜치 일므은 의도를 아주 잘 드러내도록 작성)   
2. 개발을 하면서 커밋 메세지를 상세하게 기록   
3. 개발 완료 후, Pull Request 생성   
4. Pull Request에서 리뷰 토의   
5. 리뷰가 끝나면 해당 내용을 실제 서버(혹은 테스트 서버)에 배포   
6. 배포에 문제가 생기면 그대로 다시 master 브랜치를 배포   
7. 문제가 없다면 master에 merge 하고 나서 push를 하고 나서 즉시 배포(배포 자동화)   

### Github-flow 특징
* 브런치 전략이 단순하여 Git을 처음 접하는 사람에게도 유용 (PR만 제대로 작성)
* CI(지속적 통합), CD(지속적 배포)가 자연스럽게 이루어짐   

## 어떤 전략을 사용하나?
1. 한달 이상의 긴 호흡으로 개발하여 주기적으로 배포하고, QA 및 배포, hotfix 등을 수행할 수 있는 여력이 있는 팀이라면 Git-flow가 적합   
2. 항상 릴리즈되어야 할 필요가 있는 서비스와 지속적으로 테스트하고 배포하는 팀이라면 Github-flow와 같은 간단한 Workflow가 적합   

[출처](https://www.youtube.com/watch?v=jeaf8OXYO1g&t=222s)