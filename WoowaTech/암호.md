# 암호

## 암호의 정의
<b>암호</b>는 중요한 정보를 읽기 어려운 값으로 변환하여 제 3자가 볼 수 없도록 하는 기술이다.   

* 암호로 가능한 것
    * 기밀성: 허가되지 않는 사용자는 암호화된 데이터를 볼 수 없다는 것
    * 무결성: 허락되지 않은 사용자가 암호화 데이터를 함부로 변조할 때 그것이 불가능하거나 변조가 된 후에 데이터를 검증할 수 있는 것
    * 인증: 정상적인 암호화, 복호화하는 과정에서 객체의 정체성을 식별할 수 있는 것
    * 부인 방지: 정보를 보낸 사람이 정보를 보냈다는 사실을 부인하지 못하게 하는 것   

## 견고한 암호
모든 데이터를 꼭 숨길 필요가 없음을 말하며 암호화 알고리즘은 공개하고 커크호프의 원리를 사용한다.   

* 커크호프의 원리: 키를 제외한 암호의 모든 정보가 알려지더라도 안전해야 한다.   

## 암호가 필요한 이유
데이터를 전달하는 방법에서 실제로는 물리적으로 전달하게 된다. 이러한 과정에서 해킹에 위험이 존재할 수 있다.   

그리고 데이터 베이스가 탈취당할 수 있다. 악의적인 사용자에게 접속 권한이 넘어가거나 웹 사이트에서 데이터 베이스의 내용이 노출되는 등 발생하는 문제를 예방하기 위해서 암호가 필요하다.   

## 암호 구조도
* 단방향: 해시 함수로 보통 구현
* 양방향: 대칭키와 비대칭키 두 가지로 구현   

### 단방향
단방향은 해시 함수를 사용하며 보통 MD5와 SHA 방식을 자주 사용한다.   

* 단방향 암호화 키워드
    * 해시: 함수 안에서 데이터를 문자열로 바꾸는 알고리즘
    * 복호화 불가능
    * 빠름   

* MD5
    * 보안적 용도로는 사용하지 말 것
    * 128 비트의 결과물 출력
    * 현재는 보안 문제로 사용하지 않음
* SHA
    * SHA-1
        * 160 비트의 해시값 사용
        * 2019년 이후로 크롬에서 사용 금지
    * SHA-2
        * SHA-224
        * SHA-256
        * SHA-384
        * SHA-512
        * 윈도우 업데이트 파일에 디지털 서명, 한국 인터넷 뱅킹, 비트코인에서 사용
        * SHA-1과 동일한 알고리즘 사용
    * SHA-3
        * 공모전을 통해 암호화 알고리즘 선정
        * Keccak 알고리즘이 선정
    * 눈덩이 효과   

* 단방향 암호화의 문제점
    * 충돌: 두 가지 평문이 같은 결과를 가져오는 충돌 문제
    * 사전 공격: 해커가 미리 만들어놓고 해시 결과를 미리 구해 놓는 문제 (예. 어려운 문장의 비밀번호 요구하는 것) => 이를 방지하기 위해 Salt 기법과 Key stretching 기법 사용

### 양방향
양방향은 대칭키 비대칭키의 구조로 나누어져 있다.   

* 대칭키: 암호화와 복화화에 같은 키를 사용
    * Stream 방식: XOR 연산에 기반 (평문 -> XOR -> 암호문, 암호문 -> XOR -> 평문)
        * 유사 난수를 Stream 형태로 생성하여 비교
        * 빠르고 가벼움
        * 무선 환경에서 자주 사용
        * RC4 기법, PPTP 기법, WEP 기법, TKIP 기법 등
    * Block 방식: 평문을 Block 단위로 나누어서 암호화 (ABCDEF -> AB | CD | EF)
        * 암호화와 복호화 모두 사용이 가능한 알고리즘이지만 역함수가 필요
        * Feistal 방식, SPN 방식이 대표적
        * [알고리즘마다 크기와 길이, 회전 수](https://youtu.be/itehKMMBVjc?t=541)
            * Feistal: 동일한 키를 사용하여 암호화를 계속 반복하며 암호문 생성, 반대로 역함수를 구할 필요 없이 나열된 암호문을 계속 거꾸로 함수를 암호화를 진행하면 평문
            * SPN: 평문을 하나의 여러 블록이 아닌 하나의 블록으로 처리
                * S-box는 치환 (암호, 암호화 진행)
                * P-box는 문자의 자리 변경 (암호 정렬)
                * AES가 가장 널리 사용되는 암호화 방식
* 비대칭키: 두 개의 키가 있으며 하나의 키라도 없어진다면 복호화 불가능
    * 비대칭키 알고리즘
        * 일방향 함수(트랩도어)의 수학적 원리에 기반한 암호화 알고리즘
        * 이산 대수 기반, 인수 분해 기반, 타원 곡선 기반 알고리즘이 대표적
        * F(x) = x * y
        * [비대칭키 알고리즘 종류와 사용처](https://youtu.be/itehKMMBVjc?t=658)

## 적용
### 개인정보 암호화
사용자의 데이터를 암호화하여 서버에서 데이터 베이스에 저장할 때 암호화하여 저장한다. (서버와 데이터 베이스는 양방향 암호화 통신)   

데이터 베이스에서 개인정보를 암호화한 데이터를 저장하고 (데이터 베이스는 단방향 암호화) 서버는 해당 키를 보관한다. (서버에 임시로 데이터를 암호화하는 방법도 좋으며 혹은 토큰 방식의 암호화(양방향 암호화며 공개키 사용)를 사용하는 것도 좋다.)   

[암호](https://www.youtube.com/watch?v=itehKMMBVjc)